# 📘 詳細設計書 — MyProject

## 1. 目的
本書は、MyProject アプリの機能や構造、処理フロー、データベース定義などを実装レベルで詳細に定義し、実装者が開発に必要なすべての情報を把握できるようにすることを目的とする。

---

## 2. システム構成（技術スタック）

| 要素          | 内容                                  |
|---------------|---------------------------------------|
| アーキテクチャ | Electron（ローカルアプリ）             |
| UI            | HTML / CSS（Tailwind CSSなど使用予定） |
| ロジック       | JavaScript (ES6+)                     |
| データベース   | SQLite                                |
| 通知機能       | Electron Notification API             |
| ログ          | winston + ファイル出力                 |
| 配布形式       | `.exe`, `.msi`（Windows、Electron-builder利用） |

---

## 3. ディレクトリ構成（例）

myproject/
├── main.js # Electronのエントリポイント
├── preload.js # セキュリティ用プリロードスクリプト
├── renderer/ # フロントエンド側
│ ├── index.html
│ ├── styles/
│ ├── scripts/
│ └── components/
├── database/
│ └── db.sqlite3 # SQLiteファイル
├── logs/
│ └── app.log # ログファイル
├── exports/ # エクスポート用データ
├── package.json
└── README.md

yaml
コピーする
編集する

---

## 4. データベース設計（SQLite）

### テーブル：projects

| フィールド   | 型         | 説明             |
|--------------|------------|------------------|
| id           | INTEGER PK | プロジェクトID   |
| name         | TEXT       | プロジェクト名   |
| created_at   | DATETIME   | 作成日時         |

### テーブル：tasks

| フィールド    | 型         | 説明                   |
|---------------|------------|------------------------|
| id            | INTEGER PK | タスクID               |
| project_id    | INTEGER    | 紐づくプロジェクトID   |
| title         | TEXT       | タイトル               |
| description   | TEXT       | 詳細                   |
| status        | TEXT       | 状態（未着手/進行中/完了） |
| priority      | TEXT       | 優先度（高/中/低）     |
| due_at        | DATETIME   | 期限（日時）           |
| created_at    | DATETIME   | 作成日                 |
| updated_at    | DATETIME   | 更新日                 |

---

## 5. 画面別設計

### 5.1 メイン画面（Dashboard）

- **機能**：プロジェクトの選択、タブ切り替え（タスク・スケジュール）
- **表示要素**：
  - サイドバー：プロジェクト一覧
  - メイン：タスク or カレンダー表示

---

### 5.2 タスク画面（Tasks）

- **機能**：
  - タスクの一覧表示（リスト or カンバン形式）
  - タスクの追加、編集、削除
  - ドラッグ＆ドロップでステータス変更（予定）

- **UI要素**：
  - フィルター（優先度・ステータス）
  - モーダルフォーム（新規／編集）
  - コンテキストメニュー（右クリック）

---

### 5.3 スケジュール画面（Schedule）

- **機能**：
  - カレンダー表示（週・月ビュー切替）
  - タスク期限をカレンダー上に可視化
  - クリックで詳細・編集モーダル表示

- **ライブラリ案**：
  - `fullcalendar.js` などを利用検討

---

### 5.4 設定画面（Settings）

- テーマカラーの変更（カラーピッカー）
- 通知ON/OFF
- インポート／エクスポート（将来対応）

---

## 6. 処理フロー（例）

### タスク作成処理の流れ

[ユーザーが「新規タスク」クリック]
↓
[入力フォームに情報入力]
↓
[「保存」ボタン押下]
↓
[入力バリデーション]
↓
[SQLiteにINSERT処理]
↓
[UI更新 + 通知表示]

yaml
コピーする
編集する

---

## 7. リマインダー通知処理

- 起動時または定期的に現在時刻と `due_at` を照合
- 該当タスクがあれば Electron の Notification API によりポップアップ通知を発行

---

## 8. ログ設計（winston）

- 出力先：`/logs/app.log`
- ログ形式：JSONまたはテキスト
- ログレベル：info / warn / error
- 例：

```javascript
logger.info("Task created: Buy groceries (ID: 42)");
9. インポート／エクスポート（予定）
形式：JSON

機能：

エクスポート：DB → JSONファイルとして保存

インポート：JSONを読み込んでDBに追加

操作：設定画面から実施予定

10. 非機能要件
項目	内容
起動時間	3秒以内
UI応答速度	100ms以内
オフライン動作	可能（完全ローカル）
キーボード操作	対応（タブ移動、ショートカット）
自動バックアップ	将来的に対応検討（JSONまたはDBコピー）

11. セキュリティ・運用
ローカルで完結する設計（通信不要）

保存データは暗号化されない（将来的に対応可能）

macOS対応時はコード署名とNotarizationを実施

アップデート：ElectronのautoUpdaterにより将来的に対応予定