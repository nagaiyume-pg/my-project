# データベース設計書

---

## 0. 基本情報

| 項目           | 内容         |
|----------------|--------------|
| システム名     | Selflow      |
| データベース名 | selflow      |
| DB種別         | MariaDB 10.5 |
| ホスト名       | localhost    |
| ポート番号     | 3306         |
| ユーザー名     | root         |
| 接続方法       | TCP/IP       |

---

## 1. テーブル一覧

| テーブル名 | 論理名       | 説明                       |
|------------|--------------|----------------------------|
| tasks      | タスク       | タスクを扱うテーブル       |
| schedules  | スケジュール | スケジュールを扱うテーブル |

---

## 2. テーブル定義

### tasks テーブル

| カラム名     | データ型     | NOT NULL | 主キー | デフォルト        | 説明             |
|--------------|--------------|----------|--------|-------------------|------------------|
| id           | INT          | YES      | YES    | AUTO_INCREMENT    | タスクID         |
| title        | VARCHAR(100) | YES      |        |                   | タスク名         |
| description  | TEXT         | NO       |        |                   | 詳細説明         |
| due_date     | DATE         | NO       |        | NULL              | 締切日           |
| deleted_flag | BOOLEAN      | YES      |        | FALSE             | 論理削除用フラグ |
| created_at   | DATETIME     | YES      |        | CURRENT_TIMESTAMP | 作成日時         |

## 3. テーブルのデータ例

### tasks テーブル

| id | title                  | description                                      | due_date   | deleted_flag | created_at          |
|----|------------------------|--------------------------------------------------|------------|--------------|---------------------|
| 1  | 会議資料の作成         | 来週の営業会議のためにプレゼン資料を準備する     | 2025-05-15 | FALSE        | 2025-05-10 09:30:00 |
| 2  | メール返信             | 顧客からの問い合わせメールに回答する             | NULL       | FALSE        | 2025-05-10 10:15:00 |
| 3  | プロジェクト報告書提出 | チームリーダーに週次の進捗報告書を提出する       | 2025-05-13 | TRUE         | 2025-05-09 18:00:00 |
| 4  | サーバーメンテナンス   | 定期メンテナンスのチェックリストに従い作業を行う | 2025-05-12 | FALSE        | 2025-05-08 14:45:00 |

---

## 4. インデックス・制約

### tasks テーブル

- `PRIMARY KEY (id)`
- `FOREIGN KEY (user_id) REFERENCES users(id)`

---

## 5. 論理削除フラグについて

- `deleted` カラムを全テーブルに追加し、削除処理は論理削除で対応します。
- 削除状態のレコードは `deleted = TRUE`。
- 有効なデータ取得時は `WHERE deleted = FALSE` を条件に含める。

---

## 6. クエリ文

### selflowデータベースの作成

```mysql

CREATE DATABASE selflow;

```

### selflowデータベースの削除

```mysql

DROP DATABASE selflow;

```

### tasksテーブルの作成

```mysql

CREATE TABLE tasks

```